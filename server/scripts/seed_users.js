require('dotenv').config();const { createClient } = require('@supabase/supabase-js');const SUPABASE_URL = process.env.VITE_SUPABASE_URL;const SERVICE_KEY = process.env.SUPABASE_SERVICE_KEY;if (!SERVICE_KEY || !SUPABASE_URL) {    console.error('ERROR: Missing Supabase credentials in server/.env');    process.exit(1);}const supabase = createClient(SUPABASE_URL, SERVICE_KEY, {    auth: {        autoRefreshToken: false,        persistSession: false    }});const getPasswordFromDob = (dob) => {    if (!dob) return 'Campus@123';    const [y, m, d] = dob.split('-');    return `${d}${m}${y}`;};const USERS_TO_CREATE = [    {        email: 'admin@campus.com',        name: 'Root Admin',        password: 'admin',        roles: ['SUPER_ADMIN'],        metadata: { department: 'IT Department' }    },    {        email: 'student1@campus.com',        name: 'Arjun Das',        dob: '2004-05-10',        roles: ['STUDENT'],        metadata: { department: 'Computer Science', semester: 'S4', dob: '2004-05-10' }    },    {        email: 'student2@campus.com',        name: 'Sneha Nair',        dob: '2004-08-22',        roles: ['STUDENT'],        metadata: { department: 'Mechanical Engineering', semester: 'S4', dob: '2004-08-22' }    },    {        email: 'student3@campus.com',        name: 'Rahul Varma',        dob: '2005-01-15',        roles: ['STUDENT'],        metadata: { department: 'Electronics', semester: 'S2', dob: '2005-01-15' }    },    {        email: 'student4@campus.com',        name: 'Anjali Menon',        dob: '2004-12-05',        roles: ['STUDENT'],        metadata: { department: 'Civil Engineering', semester: 'S4', dob: '2004-12-05' }    },    {        email: 'student5@campus.com',        name: 'Kiran Joseph',        dob: '2003-11-30',        roles: ['STUDENT'],        metadata: { department: 'Computer Science', semester: 'S6', dob: '2003-11-30' }    },    {        email: 'staff1@campus.com',        name: 'Dr. Ramesh Kumar',        dob: '1975-04-12',        roles: ['STAFF'],        metadata: { department: 'Computer Science', dob: '1975-04-12' }    },    {        email: 'staff2@campus.com',        name: 'Prof. Lakshmi Iyer',        dob: '1982-09-25',        roles: ['STAFF'],        metadata: { department: 'Mathematics', dob: '1982-09-25' }    },    {        email: 'staff3@campus.com',        name: 'Dr. Suresh Gopi',        dob: '1978-01-10',        roles: ['STAFF'],        metadata: { department: 'Mechanical Engineering', dob: '1978-01-10' }    },    {        email: 'staff4@campus.com',        name: 'Ms. Bindu Ravi',        dob: '1985-06-18',        roles: ['STAFF'],        metadata: { department: 'Electronics', dob: '1985-06-18' }    },    {        email: 'staff5@campus.com',        name: 'Dr. Vinod Pillai',        dob: '1972-12-01',        roles: ['STAFF'],        metadata: { department: 'Civil Engineering', dob: '1972-12-01' }    }];async function deleteAllUsers() {    console.log('--- Cleaning up existing users ---');    const { data: { users }, error } = await supabase.auth.admin.listUsers();    if (error) { console.error('Error listing users:', error); return; }    for (const user of users) {        const { error: deleteError } = await supabase.auth.admin.deleteUser(user.id);        if (!deleteError) console.log(`Deleted: ${user.email}`);    }}async function seed() {    await deleteAllUsers();    console.log(`--- Seeding ${USERS_TO_CREATE.length} users ---`);    for (const user of USERS_TO_CREATE) {        const password = user.password || getPasswordFromDob(user.dob);        const { data: authData, error: authError } = await supabase.auth.admin.createUser({            email: user.email,            password: password,            email_confirm: true,            user_metadata: { full_name: user.name, role: user.roles[0], ...user.metadata },            app_metadata: { roles: user.roles }        });        if (authError) console.error(`Failed ${user.email}: ${authError.message}`);        else console.log(`Created: ${user.email} (Password: ${password})`);    }    console.log('\n--- Seeding Process Finished ---');}seed();